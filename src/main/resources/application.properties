# =============================================================================
# CNCF Tech Advisor MCP Server Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
quarkus.application.name=cncf-tech-advisor-mcp
quarkus.application.version=1.0.0

# -----------------------------------------------------------------------------
# HTTP Server Configuration
# -----------------------------------------------------------------------------
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# CORS Configuration (required for MCP Streamable HTTP)
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Accept,Authorization

# -----------------------------------------------------------------------------
# MCP Server Configuration
# -----------------------------------------------------------------------------
# Server metadata
quarkus.mcp.server.server-info.name=cncf-tech-advisor-mcp
quarkus.mcp.server.server-info.version=1.0.0

# Traffic logging (disabled for clean MCP output)
quarkus.mcp.server.traffic-logging.enabled=false
quarkus.mcp.server.traffic-logging.text-limit=1000

# HTTP Transport (Streamable HTTP + SSE)
# The MCP endpoint is exposed at /mcp for streamable HTTP
# The SSE endpoint is exposed at /mcp/sse
quarkus.mcp.server.http.root-path=/mcp

# Streamable HTTP and SSE are enabled by default when available

# STDIO Transport - enabled by default for CLI usage
# Disable with: -Dquarkus.mcp.server.stdio.enabled=false
# When using STDIO, ensure no output to stdout
# STDIO enabled by default (for Claude Desktop, Claude Code)
quarkus.mcp.server.stdio.enabled=true
quarkus.mcp.server.stdio.initialization-enabled=true

# HTTP disabled by default (enable with --port for SSE mode)
quarkus.http.host-enabled=false

# -----------------------------------------------------------------------------
# CNCF Landscape API Configuration
# -----------------------------------------------------------------------------

# REST Client Configuration for CNCF Landscape API
quarkus.rest-client.cncf-landscape-api.url=https://landscape.cncf.io
quarkus.rest-client.cncf-landscape-api.scope=jakarta.inject.Singleton
quarkus.rest-client.cncf-landscape-api.connect-timeout=15000
quarkus.rest-client.cncf-landscape-api.read-timeout=60000



# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=ERROR
quarkus.log.category."io.quarkiverse.mcp".level=ERROR
quarkus.log.category."io.mcp.cncf".level=ERROR

# Disable banner for cleaner stdio output
quarkus.banner.enabled=false
quarkus.console.enabled=false

# -----------------------------------------------------------------------------
# Java 25 Virtual Threads Configuration
# -----------------------------------------------------------------------------
quarkus.virtual-threads.enabled=true
quarkus.virtual-threads.name-prefix=cncf-vt-
quarkus.virtual-threads.shutdown-timeout=30s

# -----------------------------------------------------------------------------
# Structured Concurrency Support (Java 25) - not available in this version
# -----------------------------------------------------------------------------
# quarkus.structured-concurrency.enabled=true

# -----------------------------------------------------------------------------
# Java 25 Profile Configuration
# -----------------------------------------------------------------------------
%java25.quarkus.virtual-threads.enabled=true
# %java25.quarkus.structured-concurrency.enabled=true
%java25.quarkus.log.level=ERROR
%java25.quarkus.log.category."io.mcp.cncf".level=ERROR

# -----------------------------------------------------------------------------
# SSE Mode Profile (activate with: --port 8080)
# -----------------------------------------------------------------------------
%sse.quarkus.http.host-enabled=true
%sse.quarkus.http.port=${PORT:8080}
%sse.quarkus.http.host=0.0.0.0
%sse.quarkus.mcp.server.stdio.enabled=false
%sse.quarkus.mcp.server.http.root-path=/mcp
%sse.quarkus.log.level=INFO
%sse.quarkus.mcp.server.traffic-logging.enabled=false
%sse.quarkus.http.cors.enabled=true
%sse.quarkus.http.cors.origins=*

# -----------------------------------------------------------------------------
# Dev Mode Settings
# -----------------------------------------------------------------------------
%dev.quarkus.log.level=INFO
%dev.quarkus.mcp.server.traffic-logging.enabled=false
%dev.quarkus.rest-client.cncf-landscape.url=http://localhost:3000
%dev.quarkus.http.host-enabled=true

# -----------------------------------------------------------------------------
# Production Settings
# -----------------------------------------------------------------------------
%prod.quarkus.log.level=INFO
%prod.quarkus.mcp.server.traffic-logging.enabled=false